language: android
sudo: required
dist: precise
android:
 components:
 - tools
 - platform-tools
 - build-tools-27.0.3
 - android-27
 - extra-android-support
 - extra-android-m2repository
 - extra-google-m2repository
 licenses:
       - 'android-sdk-preview-license-52d11cd2'
       - 'android-sdk-license-.+'
       - 'google-gdk-license-.+'

cache:
 directories:
 - "$HOME/.gradle/caches/"
 - "$HOME/.gradle/wrapper/"
 - "$HOME/.android/build-cache"

script:
- "./gradlew build assembleRelease --no-daemon --stacktrace"

deploy:
 provider: releases
 file: "app/build/outputs/apk/app-debug.apk"
 skip_cleanup: true
 on:
   repo: kambrish/demo_travis
   branch: master
   tags: true
 api_key:
   secure: e2df320d660716dcdc3e094522ced76683173278